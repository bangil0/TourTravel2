
<ion-header>

  <ion-navbar>
    <ion-title>Tour Details</ion-title>
  </ion-navbar>

</ion-header>

<ion-content>
  <div *ngFor="let bookdetails of BookingDetailSum" class="selection" style="margin-left: -10px; width:105%; overflow: visible;">
    <ion-card class="card-custom" style="top:0; margin-top:0px;" *ngFor="let price of TourPriceSum">
      <ion-row>
        <ion-col col-2>
          <ion-avatar item-start>
            <img src="../assets/img/user_pic.jpg" style="width:50px; height: 50px;">
          </ion-avatar>
        </ion-col>
        <ion-col col-5>
          <h2>{{userinfo?.Username}}</h2>
          <p class="p-custom" *ngIf="bookdetails?.Status == 'Booking_created'" >Unpaid</p>
          <p class="p-custom" *ngIf="bookdetails?.Status == 'Booking_confirmed'" >Paid</p>
          <p class="p-custom" *ngIf="bookdetails?.Status == 'Booking_Cancelled'" >Cancel</p>
        </ion-col>
        <ion-col col-5>
          <h3 class="card-title" style="text-align: right;">Total Price</h3>
          <h2 class="card-title" style="text-align: right;">{{price.SharingRoomSum['Currency']}} <span *ngFor="let bookdetails of BookingDetailSum">{{bookdetails?.TourTotalPrice | number:'.0'}}</span>.-</h2>
        </ion-col>
      </ion-row>
    </ion-card>

    <p class="custom-padding">This booking request will be expired on {{bookdetails?.ExpiredOn | date:'dd MMMM yyyy'}}</p>
    
    <ion-card>
      <ion-card-header (click)="toggleDetails(data[0])">
        <h2 class="card-title">Tour Detail</h2>
        <!--<ion-icon color="primary" item-right [name]="data[0].icon" (click)="toggleDetails(d)"></ion-icon>-->
      </ion-card-header>
      <ion-card-content style="margin-left: 0px;" *ngIf="data[0].showDetails">
        <ion-grid>
          <ion-row>
            <ion-col col-4>
              <h3 class="card-label">Tour Name: </h3>
            </ion-col>
            <ion-col col-8>
              <h3 class="card-title">{{bookdetails?.Title}}</h3>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-4>
              <h3 class="card-label">Start Date: </h3>
            </ion-col>
            <ion-col col-8>
              <h3 class="card-title">{{bookdetails?.StartDate | date:'dd MMM'}} - {{bookdetails?.EndDate | date:'dd MMM yyyy'}}</h3>
            </ion-col>
          </ion-row>
          <ion-row>
            <ion-col col-4>
              <h3 class="card-label">Total Guest(s): </h3>
            </ion-col>
            <ion-col col-8>
              <h3 class="card-title">{{bookdetails?.TotalGuest}} Guest(s)</h3>
            </ion-col>
          </ion-row>
        </ion-grid>
      </ion-card-content>
    </ion-card>

    <ion-list *ngFor="let price of TourPriceSum">
      <ion-card>
        <ion-card-header (click)="toggleDetails(data[1])">
          <h2 class="card-title">Room Allocation</h2>
        </ion-card-header>
        <ion-card-content style="margin-left: 0px;" *ngIf="data[1].showDetails">
          <ion-grid>
            <ion-row *ngIf="price.SharingRoomSum['Pax'] != 0" >
              <ion-col col-7>
                <h3 class="card-label">Sharing Room:</h3>
              </ion-col>
              <ion-col col-5>
                <h3 class="card-title">{{price.SharingRoomSum['Pax']}}</h3>
              </ion-col>
            </ion-row>
            <ion-row *ngIf="price.SingleRoomSum['Pax'] != 0">
              <ion-col col-7>
                <h3 class="card-label">Single Room: </h3>
              </ion-col>
              <ion-col col-5>
                <h3 class="card-title">{{price.SingleRoomSum['Pax']}}</h3>
              </ion-col>
            </ion-row>
            <ion-row *ngIf="price.ExtraBedSum['Pax'] != 0">
              <ion-col col-7>
                <h3 class="card-label">Extra Bed: </h3>
              </ion-col>
              <ion-col col-5>
                <h3 class="card-title">{{price.ExtraBedSum['Pax']}}</h3>
              </ion-col>
            </ion-row>
            <ion-row *ngIf="price.SharingBedSum['Pax'] != 0">
              <ion-col col-7>
                <h3 class="card-label">Sharing Bed with Parents: </h3>
              </ion-col>
              <ion-col col-5>
                <h3 class="card-title">{{price.SharingBedSum['Pax']}}</h3>
              </ion-col>
            </ion-row>
            <ion-row style="border-top:#b3b3b3 1px solid;">
              <ion-col col-10>
                <h3 class="card-title-label">Total Room(s): </h3>
              </ion-col>
              <ion-col col-2>
                <h3 class="card-title-total">{{price.SharingRoomSum['Pax']+price.SingleRoomSum['Pax']+price.ExtraBedSum['Pax']+price.SharingBedSum['Pax']}}</h3>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-card-content>
      </ion-card>

      <ion-card>
        <ion-card-header (click)="toggleDetails(data[2])">
          <h2 class="card-title">Tour Prices</h2>
        </ion-card-header>
        <ion-card-content style="margin-left: 0px;" *ngIf="data[2].showDetails">
          <ion-grid>
            <ion-row *ngIf="price.SharingRoomSum['Pax'] !=0" >
              <ion-col col-7>
                <h3 class="card-label">Staying in Sharing Room ({{price.SharingRoomSum['Pax']}} X {{price.SharingRoomSum['Currency']}} {{price.SharingRoomSum['PricePerPax']
                  | number:'.0'}}.-/Guest): </h3>
              </ion-col>
              <ion-col col-5>
                <h3 class="card-title">{{price.SharingRoomSum['Currency']}} {{price.SharingRoomSum['TotalPrice']| number:'.0'}}.-</h3>
              </ion-col>
            </ion-row>
            <ion-row *ngIf="price.SingleRoomSum['Pax'] != 0" >
              <ion-col col-7>
                <h3 class="card-label">Staying in Single Room ({{price.SingleRoomSum['Pax']}} X {{price.SingleRoomSum['Currency']}} {{price.SingleRoomSum['PricePerPax']|
                  number:'.0'}}.-/Guest): </h3>
              </ion-col>
              <ion-col col-5>
                <h3 class="card-title">{{price.SingleRoomSum['Currency']}} {{price.SingleRoomSum['TotalPrice'] | number:'.0'}}.-</h3>
              </ion-col>
            </ion-row>
            <ion-row *ngIf="price.ExtraBedSum['Pax'] != 0" >
              <ion-col col-7>
                <h3 class="card-label">Staying in Extra Bed ({{price.ExtraBedSum['Pax']}} X {{price.ExtraBedSum['Currency']}} {{price.ExtraBedSum['PricePerPax']|
                  number:'.0'}}.-/Guest): </h3>
              </ion-col>
              <ion-col col-5>
                <h3 class="card-title">{{price.ExtraBedSum['Currency']}} {{price.ExtraBedSum['TotalPrice'] | number:'.0' }}.-</h3>
              </ion-col>
            </ion-row>
            <ion-row *ngIf="price.SharingBedSum['Pax'] != 0" >
              <ion-col col-7>
                <h3 class="card-label">Staying in Sharing Bed ({{price.SharingBedSum['Pax']}} X {{price.SharingBedSum['Currency']}} {{price.SharingBedSum['PricePerPax']
                  | number:'.0'}}.-/Guest): </h3>
              </ion-col>
              <ion-col col-5>
                <h3 class="card-title">{{price.SharingBedSum['Currency']}} {{price.SharingBedSum['TotalPrice'] | number:'.0'}}.-</h3>
              </ion-col>
            </ion-row>
            <ion-row style="border-top:#b3b3b3 1px solid;">
              <ion-col col-6>
                <h3 class="card-title-label">Total Prices: </h3>
              </ion-col>
              <ion-col col-6>
                <h3 class="card-title-total">{{price.SharingRoomSum['Currency']}} <span *ngFor="let bookdetails of BookingDetailSum">{{bookdetails?.TourTotalPrice | number:'.0'}}</span>.-</h3>
              </ion-col>
            </ion-row>
          </ion-grid>
        </ion-card-content>
      </ion-card>


      <ion-card-content style="margin-left: 0px;">
        <ion-card-title (click)="toggleDetails(data[3])">
          <h2 class="card-title" style="height: 55px;padding-top: 15px;padding-left: 15px;padding-right: 15px;padding-bottom: 15px;margin-top: 0px; font-size:1.8rem;">Tour Schedules</h2>
        </ion-card-title>
        <ion-grid *ngIf="data[3].showDetails">
          <ion-item *ngFor="let dp of DailyPrograms ; let j of index" class="label-title-item">
            <ion-icon color="primary"></ion-icon>
            <div class="divider-title">
              Day {{dp.Day}}, {{dp.Date | date:'dd MMMM yyyy'}}
            </div>

            <div style="padding-bottom: 0px;" *ngIf="dp.TourDestinations.length == 0">
                    <p class="custom-label" style="font-size: 1.8rem; bottom: -21px;bottom: 215px;">No activities.</p>
            </div>

            <div style="padding-bottom: 0px;" *ngIf="dp.TourDestinations.length > 0">
              <ul class="timeline" *ngFor="let p of dp.TourDestinations; let i = index">
                <li>
                  <div class="timeline-thumb bg-color-positive timeline-icon" *ngIf="p.Destination != null">
                    <ion-icon ios="ios-pin" md="md-pin" class="timeline-icon"></ion-icon>
                  </div>
                  <div class="timeline-item" *ngIf="p.Destination != null">
                    <h4>{{p.Destination}}</h4>
                  </div>               
                </li>

                <li *ngIf="p.AccommodationSummary != null">
                  <div class="timeline-thumb bg-color-dark timeline-icon" *ngIf="p.AccommodationSummary != null">
                    <ion-icon ios="ios-cloudy-night" md="md-cloudy-night" class="timeline-icon"></ion-icon>
                  </div>
                  <div class="timeline-item" *ngIf="p.AccommodationSummary != null">
                    <h4>{{p.AccommodationSummary["Name"]}}<span>, {{p.AccommodationSummary["RoomName"]}}</span><span *ngIf="p.AccommodationSummary.RoomService != null">, {{p.AccommodationSummary["RoomService"].replace('_', ' ')}}</span></h4>
                  </div>
                </li>

                <li *ngIf="p.TransportationSummary.length > 0">
                  <div class="timeline-thumb bg-color-calm timeline-icon" *ngIf="p.TransportationSummary.length > 0">
                    <ion-icon ios="ios-bus" md="md-bus" class="timeline-icon"></ion-icon>
                  </div>
                  <div class="timeline-item" *ngIf="p.TransportationSummary.length > 0">
                    <h4><span *ngFor="let a of p.TransportationSummary ;let i = index">{{a.TransportationType}}, {{a.TransportationCapacity}} Seater <span>, {{a.TransportationService}}</span></span>
                    </h4>
                  </div>
                </li>

                <li  *ngIf="p.AttractionSummary.length > 0">
                  <div class="timeline-thumb bg-color-energized timeline-icon">
                    <ion-icon ios="ios-checkmark-circle" md="md-checkmark-circle" class="timeline-icon"></ion-icon>
                  </div>
                  <div class="timeline-item" *ngIf="p.AttractionSummary.length > 0">
                    <h4><span *ngFor="let a of p.AttractionSummary ;let i = index">{{a.Name}}<span *ngIf="p.AttractionSummary.length > 1 && i  != p.AttractionSummary.length - 1 ">, </span></span>
                    </h4>
                  </div>
                </li>

              </ul>
            </div>
          </ion-item>
        </ion-grid>
      </ion-card-content>
    </ion-list>
  </div>

  <ion-row *ngIf="isValid">
    <ion-col>
      <button ion-button style="margin-top: 0px;margin-bottom: 0px;" full class="btn-cancel" (click)="cancelTour()">Cancel</button>
    </ion-col>
    <ion-col>
      <button ion-button style="margin-top: 0px;margin-bottom: 0px;" full class="btn-accept" (click)="confirmTour()">Confirm</button>
    </ion-col>
  </ion-row>

</ion-content>

<!--<ion-footer>
        <button ion-button style="margin-top: 0px;margin-bottom: 0px;" full class="btn-accept" (click)="confirmTour()">Confirm and go to Payment Page</button>
</ion-footer>-->

<!--<ion-content class="content-bgn">
<ion-card *ngFor="let bookdetails of BookingDetailSum" style="margin-left: 0px; width:100%;">
    <img src="http://www.aishatourism.com/wp-content/uploads/2015/11/472013105526seaplane_thumb.jpg"style="
    margin-top: -10px;"/>
    <ion-card-content style="margin-left: 0px;">
        <ion-card-title>
          <h2 style="margin-top: 70px;">{{bookdetails?.Title}}</h2>
          <h3>{{bookdetails?.TotalGuest}} Guest</h3>
          <h3>{{bookdetails?.StartDate | date:'dd MMMM yyyy'}} Until {{bookdetails?.EndDate | date:'dd MMMM yyyy'}}}</h3>
        </ion-card-title>
      </ion-card-content>
</ion-card>
</ion-content>-->

<!--<ion-header>

  <ion-navbar>
    <ion-title>Tour Details</ion-title>
  </ion-navbar>

</ion-header>



<ion-content padding>
  <ion-grid style="justify-content: center;" *ngFor="let bookdetails of BookingDetailSum">
    <ion-row style="justify-content: center;">
      <ion-col center text-center>
        <h3 center text-center> {{bookdetails?.Title}} </h3>
      </ion-col>
      <ion-col center text-center col-3>
        <h5>WITH</h5>
      </ion-col>
      <ion-col center text-center>
        <h2> Tour-Arabia </h2>
      </ion-col>
    </ion-row>
    <ion-row style="justify-content: center;">
      <h3>{{bookdetails?.TotalGuest}} Guest </h3>
    </ion-row>
    <ion-row style="justify-content: center;">
      <h4> From {{bookdetails?.StartDate | date:'dd MMMM yyyy'}} Until {{bookdetails?.EndDate | date:'dd MMMM yyyy'}}</h4>
      <h4> From <span><ion-datetime displayFormat="DD MMM YYYY" [(ngModel)]="bookdetails?.StartDate"></ion-datetime></span> Until <span><ion-datetime displayFormat="DD MMM YYYY" [(ngModel)]="bookdetails?.EndDate"></ion-datetime></span></h4>
    </ion-row>
  </ion-grid>

  <ion-card *ngFor="let price of TourPriceSum">
    <ion-row>
      <ion-col>
        <h1>Allocation</h1>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-1></ion-col>
      <ion-col>Twin Room</ion-col>
      <ion-col col-1>{{price.SharingRoomSum['Pax']}} </ion-col>
      <ion-col col-1></ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-1></ion-col>
      <ion-col>Single Room</ion-col>
      <ion-col col-1>{{price.SingleRoomSum['Pax']}}</ion-col>
      <ion-col col-1></ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-1></ion-col>
      <ion-col>Extra Bed</ion-col>
      <ion-col col-1>{{price.ExtraBedSum['Pax']}}</ion-col>
      <ion-col col-1></ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-1></ion-col>
      <ion-col>Sharing Bed with Parents</ion-col>
      <ion-col col-1>{{price.SharingBedSum['Pax']}}</ion-col>
      <ion-col col-1></ion-col>
    </ion-row>
  </ion-card>



  <ion-card *ngFor="let price of TourPriceSum">
    <ion-row>
      <ion-col>
        <h1>Tour Price</h1>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-77>
        <h5>Staying in Twin Room ({{price.SharingRoomSum['Pax']}} X {{price.SharingRoomSum['Currency']}} {{price.SharingRoomSum['PricePerPax'] | number:'.0'}}.-/Guest)</h5>
      </ion-col>
      <ion-col>
        <h5>{{price.SharingRoomSum['Currency']}} {{price.SharingRoomSum['TotalPrice']| number:'.0'}}.-</h5>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-77>
        <h5>Staying in Single Room ({{price.SingleRoomSum['Pax']}} X {{price.SingleRoomSum['Currency']}} {{price.SingleRoomSum['PricePerPax']| number:'.0'}}.-/Guest)</h5>
      </ion-col>
      <ion-col>
        <h5>{{price.SingleRoomSum['Currency']}} {{price.SingleRoomSum['TotalPrice'] | number:'.0'}}.-</h5>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-77>
        <h5>Staying in Extra Bed ({{price.ExtraBedSum['Pax']}} X {{price.ExtraBedSum['Currency']}} {{price.ExtraBedSum['PricePerPax']| number:'.0'}}.-/Guest)</h5>
      </ion-col>
      <ion-col>
        <h5>{{price.ExtraBedSum['Currency']}} {{price.ExtraBedSum['TotalPrice'] | number:'.0' }}.-</h5>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-77>
        <h5>Staying in Sharing Bed ({{price.SharingBedSum['Pax']}} X {{price.SharingBedSum['Currency']}} {{price.SharingBedSum['PricePerPax'] | number:'.0'}}.-/Guest)</h5>
      </ion-col>
      <ion-col>
        <h5>{{price.SharingBedSum['Currency']}} {{price.SharingBedSum['TotalPrice'] | number:'.0'}}.-</h5>
      </ion-col>
    </ion-row>
    <ion-row style="border-top:1px solid ;">
      <ion-col>
        <h2>Total Price</h2>
      </ion-col>
      <ion-col>
        <h2>{{price.SharingBedSum['Currency']}} <span *ngFor="let bookdetails of BookingDetailSum">{{bookdetails?.TourTotalPrice | number:'.0'}}</span>.-</h2>
      </ion-col>
    </ion-row>

    <ion-row *ngFor="let bookdetails of BookingDetailSum">
      <ion-col>
        <h4>{{bookdetails?.Title}} for {{bookdetails?.TotalGuest}} Guest</h4>
      </ion-col>
    </ion-row>
    <ion-row *ngFor="let bookdetails of BookingDetailSum">
      <ion-col>
        <h3>Expired On {{bookdetails?.ExpiredOn | date:'dd MMMM yyyy'}}</h3>
      </ion-col>
    </ion-row>
  </ion-card>

  <ion-card>
    <ion-row>
      <ion-col>
        <h1>Tour Schedule</h1>
      </ion-col>
    </ion-row>

    <ion-row *ngFor="let dp of DailyPrograms ; let j of index">
        <ion-col>
          <h3>Day {{dp.Day}}, {{dp.Date | date:'dd MMMM yyyy'}}</h3>
           <h2 *ngIf="dp.TourDestinations.length == 0">There is no activities</h2>
        </ion-col>
      <ion-grid class="border-daily" *ngFor="let p of dp.TourDestinations; let i = index">
        <ion-row *ngIf="p.Destination != null">
          <ion-col>
            <h2>{{p.Destination}}</h2>
          </ion-col>
        </ion-row>

        <ion-row *ngIf="p.AccommodationSummary != null">
          <ion-col col-1></ion-col>
          <ion-col>
            <h2> Acomodation :</h2>
          </ion-col>
          <ion-col col-1></ion-col>
        </ion-row>
        <ion-row *ngIf="p.AccommodationSummary != null">
          <ion-col col-1></ion-col>  
          <ion-col style="padding-left: 40px;">
            <h3>{{p.AccommodationSummary["Name"]}}<span>, {{p.AccommodationSummary["RoomName"]}}</span><span *ngIf="p.AccommodationSummary.RoomService != null">, {{p.AccommodationSummary["RoomService"].replace('_', ' ')}}</span></h3>
          </ion-col>
        </ion-row>

        <ion-row *ngIf="p.TransportationSummary.length > 0">
          <ion-col col-1></ion-col>
          <ion-col>
            <h2> Transportation :</h2>
          </ion-col>
          <ion-col col-1></ion-col>
        </ion-row>
        <ion-row *ngIf="p.TransportationSummary.length > 0">
           <ion-col col-1></ion-col>  
          <ion-col style="padding-left: 40px;">
            <h3> <span *ngFor="let a of p.TransportationSummary ;let i = index">{{a.TransportationType}}, {{a.TransportationCapacity}} Seater <span>, {{a.TransportationService}}</span></span>
            </h3>
          </ion-col>
        </ion-row>


        <ion-row *ngIf="p.AttractionSummary.length > 0">
          <ion-col col-1></ion-col>
          <ion-col>
            <h2> Attraction :</h2>
          </ion-col>
          <ion-col col-1></ion-col>
        </ion-row>
        <ion-row *ngIf="p.AttractionSummary.length > 0">
          <ion-col col-1></ion-col>  
          <ion-col style="padding-left: 40px;">
            <h3><span *ngFor="let a of p.AttractionSummary ;let i = index">{{a.Name}}<span *ngIf="p.AttractionSummary.length > 1 && i  != p.AttractionSummary.length - 1 ">, </span></span>
            </h3>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-row>
  </ion-card>



  <ion-row *ngIf="isValid">
    <ion-col>
      <button ion-button style="margin-top: 0px;margin-bottom: 0px;" full color="danger" (click)="cancelTour()">Cancel</button>
    </ion-col>
    <ion-col>
      <button ion-button style="margin-top: 0px;margin-bottom: 0px;" full (click)="confirmTour()">Confirm</button>
    </ion-col>
  </ion-row>

</ion-content>-->